# SPDX-License-Identifier: AGPL-3.0-or-later
#
# Stagecraft - Stagecraft is a Go-based CLI that orchestrates local-first development and scalable single-host to multi-host deployments for multi-service applications powered by Docker Compose.
#
# Copyright (C) 2025  Bartek Kus
#
# This program is free software licensed under the terms of the GNU AGPL v3 or later.
#
# See https://www.gnu.org/licenses/ for license details.
#
# Stagecraft configuration for a basic Node.js application
# This example demonstrates the generic backend provider

project:
  name: basic-node

backend:
  provider: generic
  providers:
    generic:
      dev:
        command: ["npm", "run", "dev"]
        workdir: "./backend"
        env:
          NODE_ENV: development
          PORT: "4000"
      build:
        dockerfile: "./backend/Dockerfile"
        context: "./backend"

databases:
  main:
    connection_env: DATABASE_URL
    migrations:
      engine: raw
      path: ./migrations
      strategy: pre_deploy

environments:
  dev:
    driver: local
  staging:
    driver: digitalocean
  prod:
    driver: digitalocean

