# SPDX-License-Identifier: AGPL-3.0-or-later
#
# Stagecraft - Stagecraft is a Go-based CLI that orchestrates local-first development and scalable single-host to multi-host deployments for multi-service applications powered by Docker Compose.
#
# Copyright (C) 2025  Bartek Kus
#
# This program is free software licensed under the terms of the GNU AGPL v3 or later.
#
# See https://www.gnu.org/licenses/ for license details.
#
# This is a golden test file for DEV_COMPOSE_INFRA generator output.

version: "3.8"

services:
  backend:
    environment:
      A: "1"
      B: "2"
    networks:
      - stagecraft-dev

    ports:
      - "8080:3000/tcp"
      - "9090:4000/tcp"

  frontend:
    environment:
      A: "1"
      B: "2"
    networks:
      - stagecraft-dev

    ports:
      - "3000:3000/tcp"

  traefik:
    command:
      - --configfile=/etc/traefik/traefik-static.yaml
      - --providers.file.directory=/etc/traefik
      - --providers.file.watch=true
    image: traefik:v2.11
    networks:
      - stagecraft-dev

    ports:
      - "80:80"
      - "443:443"

    volumes:
      - ./.stagecraft/dev/certs:/certs:ro
      - ./.stagecraft/dev/traefik:/etc/traefik:ro
networks:
  stagecraft-dev:
    name: stagecraft-dev

